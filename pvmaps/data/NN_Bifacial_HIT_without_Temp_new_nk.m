function [y1] = NN_Bifacial_HIT_without_Temp_new_nk(x1)
%NN_BIFACIAL_HIT_WITHOUT_TEMP_NEW_NK neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jan-2023 04:33:21.
% 
% [y1] = NN_Bifacial_HIT_without_Temp_new_nk(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0];
x1_step1.gain = [2;2];
x1_step1.ymin = -1;

% Layer 1
b1 = [-4.5489960913286209276;3.2228100018213727829;1.6884443630092678124;1.6052808807590062123;-0.14684775279022121985;0.1411790531020495898;-0.89267633482737718253;-2.7329942563023239543;2.742035191613709344;6.2917440388589538358];
IW1_1 = [2.7391207909507242491 2.6354884358939703048;-0.39367541670496808415 4.0781612842698296006;-3.2205490211061991168 -1.2059404267976587821;-2.6012873506789726541 -2.1666540137532850352;-2.2267037736306347639 -2.2477555943310050246;1.1970008079382958854 2.6366354582555602271;-2.6299019291233944884 0.36970653475127135401;-2.9261653516852530466 0.47126080154584815141;1.0989326618010906156 2.6903044641727826836;3.4026270439968646642 2.9768667647788547015];

% Layer 2
b2 = [-1.9575329479597529669;1.4283908843827470836;-1.2771257602007908272;-1.3123853830780531915;-0.12065372822924876062;0.36427737680145055865;1.3041470878846932457;0.61412933523278878667;-1.6378237048114490104;-1.8276837530525233966];
LW2_1 = [0.50566082809429768741 -1.466370470715579355 -0.45485284741101178474 -0.7878639730142101838 -0.15163581608551840452 -0.39572466179999160607 0.83877496316721389391 -0.68181388873368631298 -0.40747206223362297806 -0.19744097931786358524;-0.61816159284229588167 1.0616643810076231702 0.046540137774710839402 -0.29359915262610042364 0.1693786499340206031 0.71942913461228419347 -0.18534953597924844204 0.68756615434229639838 0.38476151234970024095 1.0713714327606058685;1.2132876321681225207 -0.28229068732420575794 -0.88739340248679288159 -0.58454141563340389354 -0.07732089407893449895 0.35620918968443265884 -0.77375606024313481335 0.35048021001781198835 0.12012007715135811226 -1.13442700783903061;0.66626575158595380266 0.48663331970156070705 0.22931286489356542124 0.53945121313620469916 0.072238763535299177487 -0.18688302703500397906 0.35536098580922287349 0.28272970421315030132 0.18411141152465795856 -0.22561399183675082125;0.096719668327392177565 -0.038663859859935853502 0.19695712117723035428 -0.1021228477441131488 -0.029848328728508653068 -0.90870475150875862358 -0.39602639564311981069 0.77303252710713921125 1.1434593989090164889 -0.36064171135660622047;0.76717115790121970242 0.95696417969038294338 0.064749667551199832638 0.055034035478960005583 0.23997045877379016843 0.48046780790704868291 0.95283778364982907316 -1.7048823028096355969 0.15012941120529979533 1.9710001044610654386;0.31060187287808488366 0.60407495658166432406 0.44649472715861998617 -0.69965983152445876403 0.16369090396439112123 -0.42758563723491088693 -0.01234835830435190851 0.55225984634447988775 -0.92726408821025863016 -0.40116430035927103104;0.31114655853458716983 0.38296365836596307775 0.21106535905471576764 -0.14844365657592017982 0.2636356002572731172 0.13552494732927983234 0.78703553598790398915 -0.60859872561960459691 -0.073715974689574303991 -0.22609617775281887209;-0.39930879669091173811 1.8516685467856806024 0.13739258037022564207 1.1706162768505221639 0.733330387087830049 -0.84552365250195715696 0.065015950533972119429 0.086357996351223292875 0.21280701771015986257 3.5899019201745492325;-0.8495538325309124339 0.42386308243041825872 0.08879557418424514903 0.073068187246474347596 0.48927046696464032705 0.45839701277400446422 -0.24460075937044423178 -0.15953146573659279794 -1.1843110068637772159 0.72497340056691994548];

% Layer 3
b3 = 0.077774249480053320172;
LW3_2 = [0.96073748145763637751 1.0276768275329584146 0.29843459088063445384 1.2776392399539455713 0.19724984174363630052 -1.2344370036880207842 -0.48293205638734665319 0.2264687462332987955 2.9245882332353936306 0.54065271382750956786];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.418170217438376;
y1_step1.xoffset = 20.9779832687433;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
